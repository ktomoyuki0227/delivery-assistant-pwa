# 🔧 スマホからアクセスできない問題の解決方法

## 問題: 「サーバが応答を停止しています」エラー

### 原因
1. PCとスマホが異なるネットワークにいる
2. Windowsファイアウォールがポート3000をブロックしている
3. PCが複数のネットワークアダプタを持っている

---

## 解決策

### 方法1: ファイアウォールの設定(推奨)

以下のコマンドを**管理者権限**で実行してください:

```powershell
netsh advfirewall firewall add rule name="Next.js Dev Server" dir=in action=allow protocol=TCP localport=3000
```

または、GUIで設定:

1. **Windowsセキュリティ**を開く
2. **ファイアウォールとネットワーク保護** → **詳細設定**
3. **受信の規則** → **新しい規則**
4. **ポート** → **次へ**
5. **TCP** → **特定のローカルポート: 3000** → **次へ**
6. **接続を許可する** → **次へ**
7. すべてにチェック → **次へ**
8. 名前: 「Next.js Dev Server」 → **完了**

---

### 方法2: 正しいIPアドレスを確認

#### ステップ1: PCのIPアドレスを確認

```powershell
ipconfig
```

以下のような出力から、**Wi-Fiアダプタ**のIPv4アドレスを探す:

```
ワイヤレス LAN アダプター Wi-Fi:
   IPv4 アドレス . . . . . . . . . . : 192.168.1.100  ← これ!
```

#### ステップ2: スマホでアクセス

スマホのブラウザで:
```
http://[確認したIPアドレス]:3000
```

例: `http://192.168.1.100:3000`

---

### 方法3: 開発サーバーを再起動

現在のサーバーを停止して、すべてのネットワークインターフェースでリッスンするように起動:

```bash
# 現在のサーバーを停止(Ctrl+C)

# package.jsonを確認
# "dev": "next dev" を以下に変更:
# "dev": "next dev -H 0.0.0.0"

# 再起動
npm run dev
```

これで、すべてのネットワークインターフェースからアクセス可能になります。

---

### 方法4: Vercelにデプロイ(最も簡単)

開発環境での接続問題を避けるため、Vercelにデプロイ:

```bash
# Vercel CLIをインストール
npm install -g vercel

# デプロイ
vercel
```

デプロイ後、HTTPS対応のURLが発行されます:
```
https://your-app.vercel.app
```

このURLなら、どのデバイスからでもアクセス可能!

---

## チェックリスト

スマホからアクセスする前に確認:

- [ ] PCとスマホが同じWi-Fiネットワークに接続されている
- [ ] ファイアウォールでポート3000を許可している
- [ ] 正しいIPアドレスを使用している
- [ ] 開発サーバーが起動している(`npm run dev`)

---

## それでもダメな場合

### オプション1: ngrokを使用(トンネリング)

```bash
# ngrokをインストール
npm install -g ngrok

# トンネルを作成
ngrok http 3000
```

ngrokが生成したURLをスマホで開く。

### オプション2: Vercelにデプロイ(推奨)

最も確実な方法です。HTTPS対応で、どこからでもアクセス可能。

---

## 次のステップ

1. まず**方法1**(ファイアウォール設定)を試す
2. ダメなら**方法2**(正しいIPアドレス確認)
3. それでもダメなら**方法4**(Vercelデプロイ)

問題が解決したら、スマホでアプリをテストしてください!
